#pragma kernel VbBQcMtYybziknQTJcWEMkHhl
#pragma kernel AikeGMqwznquEoGsKXyzPPidI
#pragma kernel fldMUPNFMsAmiNIoufJlsPTdH
#pragma kernel CQfZHipSZQDKXxGHKgJbKfqXJ
struct JDZFVBecpyULZMsjkaIOFOvZQ{ int WeOyTnQIOAAFhkAawNokMFjtu; float cQOuztDbbrTHNvWdfJiYmnRwG; float kYNTqCNdVnYlrQpuZKVYMjSxk; float HoNOMjCgvHLsLjSMwLREPVjYx; float3 sRTppNrUFuyjskgCGSeTIfjHq, jxaZuSRWgTYkBDZkUojVqupUu;};RWStructuredBuffer<float3> onwcjcgAXecLlQnpjGiLPJEdI;RWStructuredBuffer<float3> kHwAmbybJgsTrvsxnZvikRYqX;RWStructuredBuffer<float3> uVpBnQOATYMXyUrYLpTJBJqlk;RWStructuredBuffer<JDZFVBecpyULZMsjkaIOFOvZQ> UlIgZQqkTbvWWXSBffRzJNCeP;RWTexture3D<float4> ufeOUqskyiZGNbVSmHNGaNliN;float xttxyLzFrZZxlRVSvLfVLftdZ;float3 sxuaMtSHTsecuiBInszeeAGdy;float3 wxPmlWGacgJZsKdRNBNvcwXfI;float HAqXXrzenjMCvfHxOCYKURSOp;int VBFQXcrvwytmfoBePpUBKoIYW;int ETdEFULkMFIdNEhjFpnUrpUMN(int3 LnVmbLiefkiETOjrGUEqGSNfv) { int3 PCYnmVjgPClggXUqRyayLiPLB = wxPmlWGacgJZsKdRNBNvcwXfI; if(LnVmbLiefkiETOjrGUEqGSNfv.x >= PCYnmVjgPClggXUqRyayLiPLB.x || LnVmbLiefkiETOjrGUEqGSNfv.y >= PCYnmVjgPClggXUqRyayLiPLB.y || LnVmbLiefkiETOjrGUEqGSNfv.z >= PCYnmVjgPClggXUqRyayLiPLB.z) return -1; int x = PCYnmVjgPClggXUqRyayLiPLB.x; int y = PCYnmVjgPClggXUqRyayLiPLB.y; int z = PCYnmVjgPClggXUqRyayLiPLB.z; return LnVmbLiefkiETOjrGUEqGSNfv.x + x * LnVmbLiefkiETOjrGUEqGSNfv.y + x * y * LnVmbLiefkiETOjrGUEqGSNfv.z;}float oTARETFCXqVffqyaACMRQjbJk(float3 ttyTqcjEXwkGPOiajeBQYoBFP, float3 HNeeQpJdYrUXlPGuVXUjoEdRa, float3 MwLtfXHUGggFUHWgdoOtprqjs, out float3 ZCzNpaCMlfbkXUujYMAccvFRn){ float WziGKAyddjkOqOaZuOhbRZffA = MwLtfXHUGggFUHWgdoOtprqjs.x - HNeeQpJdYrUXlPGuVXUjoEdRa.x; float AaIDvvXiiXpnfwbuBHaHIayds = MwLtfXHUGggFUHWgdoOtprqjs.y - HNeeQpJdYrUXlPGuVXUjoEdRa.y; float ZxQCEpoSPwnhOzPmsQTPXekKh = MwLtfXHUGggFUHWgdoOtprqjs.z - HNeeQpJdYrUXlPGuVXUjoEdRa.z; if (WziGKAyddjkOqOaZuOhbRZffA == 0.0 && AaIDvvXiiXpnfwbuBHaHIayds == 0.0 && ZxQCEpoSPwnhOzPmsQTPXekKh == 0.0) { float NugwTvfQoQYpNkRTfYHMrBjSA = ttyTqcjEXwkGPOiajeBQYoBFP.x - HNeeQpJdYrUXlPGuVXUjoEdRa.x; float oqahswnGSdOaduaTeqPtwTZNo = ttyTqcjEXwkGPOiajeBQYoBFP.y - HNeeQpJdYrUXlPGuVXUjoEdRa.y; float PRonzEyJqJXRNEbXfmJKjagyO = ttyTqcjEXwkGPOiajeBQYoBFP.z - HNeeQpJdYrUXlPGuVXUjoEdRa.z; return sqrt(NugwTvfQoQYpNkRTfYHMrBjSA * NugwTvfQoQYpNkRTfYHMrBjSA + oqahswnGSdOaduaTeqPtwTZNo * oqahswnGSdOaduaTeqPtwTZNo + PRonzEyJqJXRNEbXfmJKjagyO * PRonzEyJqJXRNEbXfmJKjagyO); } float ACKmjvvBvpSVPBHejJXQfllRT = ((ttyTqcjEXwkGPOiajeBQYoBFP.x - HNeeQpJdYrUXlPGuVXUjoEdRa.x) * WziGKAyddjkOqOaZuOhbRZffA + (ttyTqcjEXwkGPOiajeBQYoBFP.y - HNeeQpJdYrUXlPGuVXUjoEdRa.y) * AaIDvvXiiXpnfwbuBHaHIayds + (ttyTqcjEXwkGPOiajeBQYoBFP.z - HNeeQpJdYrUXlPGuVXUjoEdRa.z) * ZxQCEpoSPwnhOzPmsQTPXekKh) / (WziGKAyddjkOqOaZuOhbRZffA * WziGKAyddjkOqOaZuOhbRZffA + AaIDvvXiiXpnfwbuBHaHIayds * AaIDvvXiiXpnfwbuBHaHIayds + ZxQCEpoSPwnhOzPmsQTPXekKh * ZxQCEpoSPwnhOzPmsQTPXekKh); float BwvwLnlymDBVGeGnJdjXcRUma; float mignAlVwAdpNUWTbBrCpRHIKY; float RrCkyUNxacqkAqWhmiVDTlQdN; if (ACKmjvvBvpSVPBHejJXQfllRT < 0.0) { BwvwLnlymDBVGeGnJdjXcRUma = ttyTqcjEXwkGPOiajeBQYoBFP.x - HNeeQpJdYrUXlPGuVXUjoEdRa.x; mignAlVwAdpNUWTbBrCpRHIKY = ttyTqcjEXwkGPOiajeBQYoBFP.y - HNeeQpJdYrUXlPGuVXUjoEdRa.y; RrCkyUNxacqkAqWhmiVDTlQdN = ttyTqcjEXwkGPOiajeBQYoBFP.z - HNeeQpJdYrUXlPGuVXUjoEdRa.z; ZCzNpaCMlfbkXUujYMAccvFRn = HNeeQpJdYrUXlPGuVXUjoEdRa; } else if (ACKmjvvBvpSVPBHejJXQfllRT > 1.0) { BwvwLnlymDBVGeGnJdjXcRUma = ttyTqcjEXwkGPOiajeBQYoBFP.x - MwLtfXHUGggFUHWgdoOtprqjs.x; mignAlVwAdpNUWTbBrCpRHIKY = ttyTqcjEXwkGPOiajeBQYoBFP.y - MwLtfXHUGggFUHWgdoOtprqjs.y; RrCkyUNxacqkAqWhmiVDTlQdN = ttyTqcjEXwkGPOiajeBQYoBFP.z - MwLtfXHUGggFUHWgdoOtprqjs.z; ZCzNpaCMlfbkXUujYMAccvFRn = MwLtfXHUGggFUHWgdoOtprqjs; } else { float3 EnwAYmckiOkROykJsYqWQnzPG = float3(HNeeQpJdYrUXlPGuVXUjoEdRa.x + ACKmjvvBvpSVPBHejJXQfllRT * WziGKAyddjkOqOaZuOhbRZffA, HNeeQpJdYrUXlPGuVXUjoEdRa.y + ACKmjvvBvpSVPBHejJXQfllRT * AaIDvvXiiXpnfwbuBHaHIayds, HNeeQpJdYrUXlPGuVXUjoEdRa.z + ACKmjvvBvpSVPBHejJXQfllRT * ZxQCEpoSPwnhOzPmsQTPXekKh); BwvwLnlymDBVGeGnJdjXcRUma = ttyTqcjEXwkGPOiajeBQYoBFP.x - EnwAYmckiOkROykJsYqWQnzPG.x; mignAlVwAdpNUWTbBrCpRHIKY = ttyTqcjEXwkGPOiajeBQYoBFP.y - EnwAYmckiOkROykJsYqWQnzPG.y; RrCkyUNxacqkAqWhmiVDTlQdN = ttyTqcjEXwkGPOiajeBQYoBFP.z - EnwAYmckiOkROykJsYqWQnzPG.z; ZCzNpaCMlfbkXUujYMAccvFRn = EnwAYmckiOkROykJsYqWQnzPG; } return sqrt(BwvwLnlymDBVGeGnJdjXcRUma * BwvwLnlymDBVGeGnJdjXcRUma + mignAlVwAdpNUWTbBrCpRHIKY * mignAlVwAdpNUWTbBrCpRHIKY + RrCkyUNxacqkAqWhmiVDTlQdN * RrCkyUNxacqkAqWhmiVDTlQdN);}float3 eUBWTbSdQqhHOdzXsAzIHqSfo(float3 udNVBHhcwHIjgDlmltnyIRUYj, float3 exRnjiwXqmJvoqiYtzhbfkNCx) { for(int i=0; i < VBFQXcrvwytmfoBePpUBKoIYW; i++) { float ACKmjvvBvpSVPBHejJXQfllRT = 1; JDZFVBecpyULZMsjkaIOFOvZQ qidzBnjOmfKdLeFVMeAFRyBcu = UlIgZQqkTbvWWXSBffRzJNCeP[i]; float3 zyFcFxmDcYfhdlRgItwFvClmz = 0; bool FuCNqJjxixzFVIgXpzknbCxiH = true; if (qidzBnjOmfKdLeFVMeAFRyBcu.WeOyTnQIOAAFhkAawNokMFjtu != 0) { float wmZQvXhVWgMwxaeNrPeqqqbEH = oTARETFCXqVffqyaACMRQjbJk(exRnjiwXqmJvoqiYtzhbfkNCx, qidzBnjOmfKdLeFVMeAFRyBcu.sRTppNrUFuyjskgCGSeTIfjHq, qidzBnjOmfKdLeFVMeAFRyBcu.jxaZuSRWgTYkBDZkUojVqupUu, zyFcFxmDcYfhdlRgItwFvClmz); if (wmZQvXhVWgMwxaeNrPeqqqbEH > qidzBnjOmfKdLeFVMeAFRyBcu.cQOuztDbbrTHNvWdfJiYmnRwG) { ACKmjvvBvpSVPBHejJXQfllRT = saturate(1.0 - (wmZQvXhVWgMwxaeNrPeqqqbEH - qidzBnjOmfKdLeFVMeAFRyBcu.cQOuztDbbrTHNvWdfJiYmnRwG) / (qidzBnjOmfKdLeFVMeAFRyBcu.kYNTqCNdVnYlrQpuZKVYMjSxk - qidzBnjOmfKdLeFVMeAFRyBcu.cQOuztDbbrTHNvWdfJiYmnRwG)); FuCNqJjxixzFVIgXpzknbCxiH = false; } if (qidzBnjOmfKdLeFVMeAFRyBcu.WeOyTnQIOAAFhkAawNokMFjtu == 2) { udNVBHhcwHIjgDlmltnyIRUYj *= lerp(1, qidzBnjOmfKdLeFVMeAFRyBcu.HoNOMjCgvHLsLjSMwLREPVjYx, ACKmjvvBvpSVPBHejJXQfllRT); } } if (qidzBnjOmfKdLeFVMeAFRyBcu.WeOyTnQIOAAFhkAawNokMFjtu != 2) { float3 kfiIoKryIrefnAJxfWfipwHKs = qidzBnjOmfKdLeFVMeAFRyBcu.WeOyTnQIOAAFhkAawNokMFjtu == 3 ? normalize(zyFcFxmDcYfhdlRgItwFvClmz - exRnjiwXqmJvoqiYtzhbfkNCx) : normalize(qidzBnjOmfKdLeFVMeAFRyBcu.jxaZuSRWgTYkBDZkUojVqupUu - qidzBnjOmfKdLeFVMeAFRyBcu.sRTppNrUFuyjskgCGSeTIfjHq); if(FuCNqJjxixzFVIgXpzknbCxiH && qidzBnjOmfKdLeFVMeAFRyBcu.WeOyTnQIOAAFhkAawNokMFjtu == 3) { udNVBHhcwHIjgDlmltnyIRUYj = 0; } else { udNVBHhcwHIjgDlmltnyIRUYj += kfiIoKryIrefnAJxfWfipwHKs * qidzBnjOmfKdLeFVMeAFRyBcu.HoNOMjCgvHLsLjSMwLREPVjYx / 2 * ACKmjvvBvpSVPBHejJXQfllRT; } } } return udNVBHhcwHIjgDlmltnyIRUYj;}[numthreads(4,4,4)]void VbBQcMtYybziknQTJcWEMkHhl (int3 RUKWyiIApGLAzeKlFrVKmaGuK : SV_DispatchThreadID){ int MiprgXNFPMIsXqSHfSzfHAtpz = ETdEFULkMFIdNEhjFpnUrpUMN(RUKWyiIApGLAzeKlFrVKmaGuK); if(MiprgXNFPMIsXqSHfSzfHAtpz == -1) return; onwcjcgAXecLlQnpjGiLPJEdI[MiprgXNFPMIsXqSHfSzfHAtpz] = float3(RUKWyiIApGLAzeKlFrVKmaGuK.x, RUKWyiIApGLAzeKlFrVKmaGuK.y, RUKWyiIApGLAzeKlFrVKmaGuK.z ) * xttxyLzFrZZxlRVSvLfVLftdZ ;}[numthreads(4,4,4)]void AikeGMqwznquEoGsKXyzPPidI (int3 JWOXDQQtmQuksOEcWfQcJlFTK : SV_DispatchThreadID){ int QMrqhhsKQvYjLbVFpvTXVBnUA = ETdEFULkMFIdNEhjFpnUrpUMN(JWOXDQQtmQuksOEcWfQcJlFTK); if(QMrqhhsKQvYjLbVFpvTXVBnUA == -1) return; float3 ScBbrCjMQwziyOXKzpJVtZkKE = floor(JWOXDQQtmQuksOEcWfQcJlFTK * HAqXXrzenjMCvfHxOCYKURSOp); float3 kGiFcwRAigHRWaTUVOLtFZkUr = uVpBnQOATYMXyUrYLpTJBJqlk[ScBbrCjMQwziyOXKzpJVtZkKE.x + sxuaMtSHTsecuiBInszeeAGdy.x * ScBbrCjMQwziyOXKzpJVtZkKE.y + sxuaMtSHTsecuiBInszeeAGdy.x * sxuaMtSHTsecuiBInszeeAGdy.y * ScBbrCjMQwziyOXKzpJVtZkKE.z]; float3 UeRbBwzUNLRGvGUbDKUOJeFUU = onwcjcgAXecLlQnpjGiLPJEdI[QMrqhhsKQvYjLbVFpvTXVBnUA]; kGiFcwRAigHRWaTUVOLtFZkUr = eUBWTbSdQqhHOdzXsAzIHqSfo(kGiFcwRAigHRWaTUVOLtFZkUr, UeRbBwzUNLRGvGUbDKUOJeFUU); kHwAmbybJgsTrvsxnZvikRYqX[QMrqhhsKQvYjLbVFpvTXVBnUA] = length(kGiFcwRAigHRWaTUVOLtFZkUr) > 0.5 ? normalize(kGiFcwRAigHRWaTUVOLtFZkUr)*0.5 : kGiFcwRAigHRWaTUVOLtFZkUr;}[numthreads(4,4,4)]void fldMUPNFMsAmiNIoufJlsPTdH (int3 ZJOqpsBCkteNuhKazzcwJtLBu : SV_DispatchThreadID){ if(ZJOqpsBCkteNuhKazzcwJtLBu.x >= sxuaMtSHTsecuiBInszeeAGdy.x || ZJOqpsBCkteNuhKazzcwJtLBu.y >= sxuaMtSHTsecuiBInszeeAGdy.y || ZJOqpsBCkteNuhKazzcwJtLBu.z >= sxuaMtSHTsecuiBInszeeAGdy.z) return ; int x = sxuaMtSHTsecuiBInszeeAGdy.x; int y = sxuaMtSHTsecuiBInszeeAGdy.y; int z = sxuaMtSHTsecuiBInszeeAGdy.z; int UAIsAHXxgowLRTTsPkzgdoMek = ZJOqpsBCkteNuhKazzcwJtLBu.x + x * ZJOqpsBCkteNuhKazzcwJtLBu.y + x * y * ZJOqpsBCkteNuhKazzcwJtLBu.z; float3 kGiFcwRAigHRWaTUVOLtFZkUr = uVpBnQOATYMXyUrYLpTJBJqlk[UAIsAHXxgowLRTTsPkzgdoMek]; float3 JWOXDQQtmQuksOEcWfQcJlFTK = float3(ZJOqpsBCkteNuhKazzcwJtLBu.x, ZJOqpsBCkteNuhKazzcwJtLBu.y, ZJOqpsBCkteNuhKazzcwJtLBu.z) * xttxyLzFrZZxlRVSvLfVLftdZ / HAqXXrzenjMCvfHxOCYKURSOp; kGiFcwRAigHRWaTUVOLtFZkUr = eUBWTbSdQqhHOdzXsAzIHqSfo(kGiFcwRAigHRWaTUVOLtFZkUr, JWOXDQQtmQuksOEcWfQcJlFTK); uVpBnQOATYMXyUrYLpTJBJqlk[UAIsAHXxgowLRTTsPkzgdoMek] = length(kGiFcwRAigHRWaTUVOLtFZkUr) > 0.5 ? normalize(kGiFcwRAigHRWaTUVOLtFZkUr)*0.5 : kGiFcwRAigHRWaTUVOLtFZkUr;}[numthreads(4,4,4)]void CQfZHipSZQDKXxGHKgJbKfqXJ (int3 wVpCIaAMuMCXrsOjaTOUPDJeq : SV_DispatchThreadID){ if(wVpCIaAMuMCXrsOjaTOUPDJeq.x >= sxuaMtSHTsecuiBInszeeAGdy.x || wVpCIaAMuMCXrsOjaTOUPDJeq.y >= sxuaMtSHTsecuiBInszeeAGdy.y || wVpCIaAMuMCXrsOjaTOUPDJeq.z >= sxuaMtSHTsecuiBInszeeAGdy.z) return ; int x = sxuaMtSHTsecuiBInszeeAGdy.x; int y = sxuaMtSHTsecuiBInszeeAGdy.y; int z = sxuaMtSHTsecuiBInszeeAGdy.z; int lrHeywuONfHBeovSdlReaWurV = wVpCIaAMuMCXrsOjaTOUPDJeq.x + x * wVpCIaAMuMCXrsOjaTOUPDJeq.y + x * y * wVpCIaAMuMCXrsOjaTOUPDJeq.z; float3 EocBKzIYfWetApSmIcuorKrbN = uVpBnQOATYMXyUrYLpTJBJqlk[lrHeywuONfHBeovSdlReaWurV]; float3 JWOXDQQtmQuksOEcWfQcJlFTK = float3(wVpCIaAMuMCXrsOjaTOUPDJeq.x, wVpCIaAMuMCXrsOjaTOUPDJeq.y, wVpCIaAMuMCXrsOjaTOUPDJeq.z) * xttxyLzFrZZxlRVSvLfVLftdZ / HAqXXrzenjMCvfHxOCYKURSOp; EocBKzIYfWetApSmIcuorKrbN = eUBWTbSdQqhHOdzXsAzIHqSfo(EocBKzIYfWetApSmIcuorKrbN, JWOXDQQtmQuksOEcWfQcJlFTK); ufeOUqskyiZGNbVSmHNGaNliN[wVpCIaAMuMCXrsOjaTOUPDJeq.xyz] = float4(length(EocBKzIYfWetApSmIcuorKrbN) > 0.5 ? normalize(EocBKzIYfWetApSmIcuorKrbN)*0.5 : EocBKzIYfWetApSmIcuorKrbN,1) + 0.5;}